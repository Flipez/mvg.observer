const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-CLu3EmBG.js","assets/jsx-runtime-kF-aRxYe.js"])))=>i.map(i=>d[i]);
import{g as mt,r as i,j as u}from"./jsx-runtime-kF-aRxYe.js";import{r as je}from"./index-DgWtcivP.js";import{t as ce,f as Me,P as Se,a as Ne,b as Pe,R as pt,S as ht}from"./subway-label-C4BBXhYZ.js";import{K as Le,H as ke,M as gt,Q as Z,T as se,S as D,I as yt,l as V,c as Re,o as Ae,b as De,u as Ie,q as vt,d as Oe,A as xt,P as G,e as L,f as $e,D as bt,C as Ct,U as Tt,w as Et,m as R,p as wt}from"./index-5hEqvTZa.js";import{t as pe,c as Fe,R as _t,I as jt}from"./i18next-B7RnYmCb.js";var Mt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const St=mt(Mt);var Nt=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function he(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(St[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var o=e.indexOf("-->");return{type:"comment",comment:o!==-1?e.slice(4,o):""}}for(var r=new RegExp(Nt),s=null;(s=r.exec(e))!==null;)if(s[0].trim())if(s[1]){var a=s[1].trim(),c=[a,""];a.indexOf("=")>-1&&(c=a.split("=")),n.attrs[c[0]]=c[1],r.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var Pt=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Lt=/^\s*$/,kt=Object.create(null);function ze(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var o=[];for(var r in t)o.push(r+'="'+t[r]+'"');return o.length?" "+o.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(ze,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var Rt={parse:function(e,n){n||(n={}),n.components||(n.components=kt);var t,o=[],r=[],s=-1,a=!1;if(e.indexOf("<")!==0){var c=e.indexOf("<");o.push({type:"text",content:c===-1?e:e.substring(0,c)})}return e.replace(Pt,function(l,d){if(a){if(l!=="</"+t.name+">")return;a=!1}var f,m=l.charAt(1)!=="/",p=l.startsWith("<!--"),h=d+l.length,y=e.charAt(h);if(p){var w=he(l);return s<0?(o.push(w),o):((f=r[s]).children.push(w),o)}if(m&&(s++,(t=he(l)).type==="tag"&&n.components[t.name]&&(t.type="component",a=!0),t.voidElement||a||!y||y==="<"||t.children.push({type:"text",content:e.slice(h,e.indexOf("<",h))}),s===0&&o.push(t),(f=r[s-1])&&f.children.push(t),r[s]=t),(!m||t.voidElement)&&(s>-1&&(t.voidElement||t.name===l.slice(2,-1))&&(s--,t=s===-1?o:r[s]),!a&&y!=="<"&&y)){f=s===-1?o:r[s].children;var C=e.indexOf("<",h),v=e.slice(h,C===-1?void 0:C);Lt.test(v)&&(v=" "),(C>-1&&s+f.length>=0||v!==" ")&&f.push({type:"text",content:v})}}),o},stringify:function(e){return e.reduce(function(n,t){return n+ze("",t)},"")}};const ae=(e,n)=>{var o;if(!e)return!1;const t=((o=e.props)==null?void 0:o.children)??e.children;return n?t.length>0:!!t},ie=e=>{var t,o;if(!e)return[];const n=((t=e.props)==null?void 0:t.children)??e.children;return(o=e.props)!=null&&o.i18nIsDynamicList?$(n):n},At=e=>Array.isArray(e)&&e.every(i.isValidElement),$=e=>Array.isArray(e)?e:[e],Dt=(e,n)=>{const t={...n};return t.props=Object.assign(e.props,n.props),t},He=(e,n,t,o)=>{if(!e)return"";let r="";const s=$(e),a=n!=null&&n.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((c,l)=>{if(Z(c)){r+=`${c}`;return}if(i.isValidElement(c)){const{props:d,type:f}=c,m=Object.keys(d).length,p=a.indexOf(f)>-1,h=d.children;if(!h&&p&&!m){r+=`<${f}/>`;return}if(!h&&(!p||m)||d.i18nIsDynamicList){r+=`<${l}></${l}>`;return}if(p&&m===1&&Z(h)){r+=`<${f}>${h}</${f}>`;return}const y=He(h,n,t,o);r+=`<${l}>${y}</${l}>`;return}if(c===null){se(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:o});return}if(D(c)){const{format:d,...f}=c,m=Object.keys(f);if(m.length===1){const p=d?`${m[0]}, ${d}`:m[0];r+=`{{${p}}}`;return}se(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:o,child:c});return}se(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:o,child:c})}),r},It=(e,n,t,o,r,s,a)=>{if(t==="")return[];const c=r.transKeepBasicHtmlNodesFor||[],l=t&&new RegExp(c.map(v=>`<${v}`).join("|")).test(t);if(!e&&!n&&!l&&!a)return[t];const d=n??{},f=v=>{$(v).forEach(x=>{Z(x)||(ae(x)?f(ie(x)):D(x)&&!i.isValidElement(x)&&Object.assign(d,x))})};f(e);const m=Rt.parse(`<0>${t}</0>`),p={...d,...s},h=(v,E,x)=>{var b;const T=ie(v),_=w(T,E.children,x);return At(T)&&_.length===0||(b=v.props)!=null&&b.i18nIsDynamicList?T:_},y=(v,E,x,T,_)=>{v.dummy?(v.children=E,x.push(i.cloneElement(v,{key:T},_?void 0:E))):x.push(...i.Children.map([v],b=>{const g={...b.props};return delete g.i18nIsDynamicList,i.createElement(b.type,{...g,key:T,ref:b.props.ref??b.ref},_?null:E)}))},w=(v,E,x)=>{const T=$(v);return $(E).reduce((b,g,N)=>{var U,W;const A=((W=(U=g.children)==null?void 0:U[0])==null?void 0:W.content)&&o.services.interpolator.interpolate(g.children[0].content,p,o.language);if(g.type==="tag"){let S=T[parseInt(g.name,10)];!S&&n&&(S=n[g.name]),x.length===1&&!S&&(S=x[0][g.name]),S||(S={});const j=Object.keys(g.attrs).length!==0?Dt({props:g.attrs},S):S,O=i.isValidElement(j),K=O&&ae(g,!0)&&!g.voidElement,Y=l&&D(j)&&j.dummy&&!O,J=D(n)&&Object.hasOwnProperty.call(n,g.name);if(Z(j)){const M=o.services.interpolator.interpolate(j,p,o.language);b.push(M)}else if(ae(j)||K){const M=h(j,g,x);y(j,M,b,N)}else if(Y){const M=w(T,g.children,x);y(j,M,b,N)}else if(Number.isNaN(parseFloat(g.name)))if(J){const M=h(j,g,x);y(j,M,b,N,g.voidElement)}else if(r.transSupportBasicHtmlNodes&&c.indexOf(g.name)>-1)if(g.voidElement)b.push(i.createElement(g.name,{key:`${g.name}-${N}`}));else{const M=w(T,g.children,x);b.push(i.createElement(g.name,{key:`${g.name}-${N}`},M))}else if(g.voidElement)b.push(`<${g.name} />`);else{const M=w(T,g.children,x);b.push(`<${g.name}>${M}</${g.name}>`)}else if(D(j)&&!O){const M=g.children[0]?A:null;M&&b.push(M)}else y(j,A,b,N,g.children.length!==1||!A)}else if(g.type==="text"){const S=r.transWrapTextNodes,j=a?r.unescape(o.services.interpolator.interpolate(g.content,p,o.language)):o.services.interpolator.interpolate(g.content,p,o.language);S?b.push(i.createElement(S,{key:`${g.name}-${N}`},j)):b.push(j)}return b},[])},C=w([{dummy:!0,children:e||[]}],m,$(e||[]));return ie(C[0])},Ve=(e,n,t)=>{const o=e.key||n,r=i.cloneElement(e,{key:o});if(!r.props||!r.props.children||t.indexOf(`${n}/>`)<0&&t.indexOf(`${n} />`)<0)return r;function s(){return i.createElement(i.Fragment,null,r)}return i.createElement(s,{key:o})},Ot=(e,n)=>e.map((t,o)=>Ve(t,o,n)),$t=(e,n)=>{const t={};return Object.keys(e).forEach(o=>{Object.assign(t,{[o]:Ve(e[o],o,n)})}),t},Ft=(e,n,t,o)=>e?Array.isArray(e)?Ot(e,n):D(e)?$t(e,n):(Le(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:o}),null):null,zt=e=>!D(e)||Array.isArray(e)?!1:Object.keys(e).reduce((n,t)=>n&&Number.isNaN(Number.parseFloat(t)),!0);function Ht({children:e,count:n,parent:t,i18nKey:o,context:r,tOptions:s={},values:a,defaults:c,components:l,ns:d,i18n:f,t:m,shouldUnescape:p,...h}){var O,K,Y,J,M,me;const y=f||ke();if(!y)return Le(y,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:o}),e;const w=m||y.t.bind(y)||(ft=>ft),C={...gt(),...(O=y.options)==null?void 0:O.react};let v=d||w.ns||((K=y.options)==null?void 0:K.defaultNS);v=Z(v)?[v]:v||["translation"];const E=He(e,C,y,o),x=c||E||C.transEmptyNodeValue||o,{hashTransKey:T}=C,_=o||(T?T(E||x):E||x);(J=(Y=y.options)==null?void 0:Y.interpolation)!=null&&J.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const b=a||n!==void 0&&!((me=(M=y.options)==null?void 0:M.interpolation)!=null&&me.alwaysFormat)||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},g={...s,context:r||s.context,count:n,...a,...b,defaultValue:x,ns:v},N=_?w(_,g):x,A=Ft(l,N,y,o);let U=A||e,W=null;zt(A)&&(W=A,U=e);const S=It(U,W,N,y,C,g,p),j=t??C.defaultTransParent;return j?i.createElement(j,h,S):S}function F({children:e,count:n,parent:t,i18nKey:o,context:r,tOptions:s={},values:a,defaults:c,components:l,ns:d,i18n:f,t:m,shouldUnescape:p,...h}){var E;const{i18n:y,defaultNS:w}=i.useContext(yt)||{},C=f||y||ke(),v=m||(C==null?void 0:C.t.bind(C));return Ht({children:e,count:n,parent:t,i18nKey:o,context:r,tOptions:s,values:a,defaults:c,components:l,ns:d||(v==null?void 0:v.ns)||w||((E=C==null?void 0:C.options)==null?void 0:E.defaultNS),i18n:C,t:m,shouldUnescape:p,...h})}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=V("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=V("MessageSquareWarning",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v2",key:"stiyo7"}],["path",{d:"M12 13h.01",key:"y0uutt"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=V("Tally1",[["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=V("Tally2",[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=V("Tally3",[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=V("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function Gt(e){return n=>{const o=(e?Math[e]:Math.trunc)(n);return o===0?0:o}}function Kt(e,n){return+ce(e)-+ce(n)}function Yt(e,n,t){const o=Kt(e,n)/1e3;return Gt(t==null?void 0:t.roundingMethod)(o)}function Ue(e,n){return ce(e*1e3,n==null?void 0:n.in)}function Jt(e){const n=Math.floor(e),t=Math.round((e-n)*60);return n===0?`${t}s`:t===0?`${n}m`:`${n}m ${t}s`}function Xt(e){const n=Ue(e/1e3),t=Yt(n,new Date);return t>=60?`${Math.round(t/60)} Min`:t<0?pe("Misc.Departed"):`${Math.abs(t)} ${pe("Misc.SecondsShort")}`}function Qt(e){const n=Ue(e/1e3);return Me(n,"HH:mm")}function po(e){return Object.values(e).length==0?null:Object.values(e).reduce((t,o)=>t&&t.avgDelay>o.avgDelay?t:o)}function en(e){const n=Object.values(e.departures);return n.length===0?null:n.reduce((t,o)=>o.delayInMinutes>t.delayInMinutes?o:t)}function tn({occupancy:e}){switch(e){case"LOW":return u.jsx(Wt,{color:"#31C48D",style:{transform:"rotate(-90deg)"}});case"MEDIUM":return u.jsx(Bt,{color:"#FACA15",style:{transform:"rotate(-90deg)"}});case"HIGH":return u.jsx(Zt,{color:"#F05252",style:{transform:"rotate(-90deg)"}})}}function nn({children:e,iconColor:n="text-gray-500",size:t=20}){return u.jsxs(Se,{children:[u.jsx(Ne,{children:u.jsx(Vt,{size:t,className:n})}),u.jsx(Pe,{children:e})]})}var[ee,ho]=Re("Tooltip",[Ae]),te=Ae(),We="TooltipProvider",on=700,le="tooltip.open",[rn,de]=ee(We),Be=e=>{const{__scopeTooltip:n,delayDuration:t=on,skipDelayDuration:o=300,disableHoverableContent:r=!1,children:s}=e,a=i.useRef(!0),c=i.useRef(!1),l=i.useRef(0);return i.useEffect(()=>{const d=l.current;return()=>window.clearTimeout(d)},[]),u.jsx(rn,{scope:n,isOpenDelayedRef:a,delayDuration:t,onOpen:i.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,o)},[o]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(d=>{c.current=d},[]),disableHoverableContent:r,children:s})};Be.displayName=We;var q="Tooltip",[sn,ne]=ee(q),Ze=e=>{const{__scopeTooltip:n,children:t,open:o,defaultOpen:r,onOpenChange:s,disableHoverableContent:a,delayDuration:c}=e,l=de(q,e.__scopeTooltip),d=te(n),[f,m]=i.useState(null),p=De(),h=i.useRef(0),y=a??l.disableHoverableContent,w=c??l.delayDuration,C=i.useRef(!1),[v,E]=Ie({prop:o,defaultProp:r??!1,onChange:g=>{g?(l.onOpen(),document.dispatchEvent(new CustomEvent(le))):l.onClose(),s==null||s(g)},caller:q}),x=i.useMemo(()=>v?C.current?"delayed-open":"instant-open":"closed",[v]),T=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,C.current=!1,E(!0)},[E]),_=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,E(!1)},[E]),b=i.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{C.current=!0,E(!0),h.current=0},w)},[w,E]);return i.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),u.jsx(vt,{...d,children:u.jsx(sn,{scope:n,contentId:p,open:v,stateAttribute:x,trigger:f,onTriggerChange:m,onTriggerEnter:i.useCallback(()=>{l.isOpenDelayedRef.current?b():T()},[l.isOpenDelayedRef,b,T]),onTriggerLeave:i.useCallback(()=>{y?_():(window.clearTimeout(h.current),h.current=0)},[_,y]),onOpen:T,onClose:_,disableHoverableContent:y,children:t})})};Ze.displayName=q;var ue="TooltipTrigger",qe=i.forwardRef((e,n)=>{const{__scopeTooltip:t,...o}=e,r=ne(ue,t),s=de(ue,t),a=te(t),c=i.useRef(null),l=Oe(n,c,r.onTriggerChange),d=i.useRef(!1),f=i.useRef(!1),m=i.useCallback(()=>d.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),u.jsx(xt,{asChild:!0,...a,children:u.jsx(G.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...o,ref:l,onPointerMove:L(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),f.current=!0)}),onPointerLeave:L(e.onPointerLeave,()=>{r.onTriggerLeave(),f.current=!1}),onPointerDown:L(e.onPointerDown,()=>{r.open&&r.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:L(e.onFocus,()=>{d.current||r.onOpen()}),onBlur:L(e.onBlur,r.onClose),onClick:L(e.onClick,r.onClose)})})});qe.displayName=ue;var an="TooltipPortal",[go,cn]=ee(an,{forceMount:void 0}),z="TooltipContent",Ge=i.forwardRef((e,n)=>{const t=cn(z,e.__scopeTooltip),{forceMount:o=t.forceMount,side:r="top",...s}=e,a=ne(z,e.__scopeTooltip);return u.jsx($e,{present:o||a.open,children:a.disableHoverableContent?u.jsx(Ke,{side:r,...s,ref:n}):u.jsx(ln,{side:r,...s,ref:n})})}),ln=i.forwardRef((e,n)=>{const t=ne(z,e.__scopeTooltip),o=de(z,e.__scopeTooltip),r=i.useRef(null),s=Oe(n,r),[a,c]=i.useState(null),{trigger:l,onClose:d}=t,f=r.current,{onPointerInTransitChange:m}=o,p=i.useCallback(()=>{c(null),m(!1)},[m]),h=i.useCallback((y,w)=>{const C=y.currentTarget,v={x:y.clientX,y:y.clientY},E=pn(v,C.getBoundingClientRect()),x=hn(v,E),T=gn(w.getBoundingClientRect()),_=vn([...x,...T]);c(_),m(!0)},[m]);return i.useEffect(()=>()=>p(),[p]),i.useEffect(()=>{if(l&&f){const y=C=>h(C,f),w=C=>h(C,l);return l.addEventListener("pointerleave",y),f.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",y),f.removeEventListener("pointerleave",w)}}},[l,f,h,p]),i.useEffect(()=>{if(a){const y=w=>{const C=w.target,v={x:w.clientX,y:w.clientY},E=(l==null?void 0:l.contains(C))||(f==null?void 0:f.contains(C)),x=!yn(v,a);E?p():x&&(p(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,f,a,d,p]),u.jsx(Ke,{...e,ref:s})}),[un,dn]=ee(q,{isInside:!1}),fn=Tt("TooltipContent"),Ke=i.forwardRef((e,n)=>{const{__scopeTooltip:t,children:o,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:a,...c}=e,l=ne(z,t),d=te(t),{onClose:f}=l;return i.useEffect(()=>(document.addEventListener(le,f),()=>document.removeEventListener(le,f)),[f]),i.useEffect(()=>{if(l.trigger){const m=p=>{const h=p.target;h!=null&&h.contains(l.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[l.trigger,f]),u.jsx(bt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:u.jsxs(Ct,{"data-state":l.stateAttribute,...d,...c,ref:n,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(fn,{children:o}),u.jsx(un,{scope:t,isInside:!0,children:u.jsx(pt,{id:l.contentId,role:"tooltip",children:r||o})})]})})});Ge.displayName=z;var Ye="TooltipArrow",mn=i.forwardRef((e,n)=>{const{__scopeTooltip:t,...o}=e,r=te(t);return dn(Ye,t).isInside?null:u.jsx(Et,{...r,...o,ref:n})});mn.displayName=Ye;function pn(e,n){const t=Math.abs(n.top-e.y),o=Math.abs(n.bottom-e.y),r=Math.abs(n.right-e.x),s=Math.abs(n.left-e.x);switch(Math.min(t,o,r,s)){case s:return"left";case r:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function hn(e,n,t=5){const o=[];switch(n){case"top":o.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":o.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":o.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":o.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return o}function gn(e){const{top:n,right:t,bottom:o,left:r}=e;return[{x:r,y:n},{x:t,y:n},{x:t,y:o},{x:r,y:o}]}function yn(e,n){const{x:t,y:o}=e;let r=!1;for(let s=0,a=n.length-1;s<n.length;a=s++){const c=n[s],l=n[a],d=c.x,f=c.y,m=l.x,p=l.y;f>o!=p>o&&t<(m-d)*(o-f)/(p-f)+d&&(r=!r)}return r}function vn(e){const n=e.slice();return n.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),xn(n)}function xn(e){if(e.length<=1)return e.slice();const n=[];for(let o=0;o<e.length;o++){const r=e[o];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))n.pop();else break}n.push(r)}n.pop();const t=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}return t.pop(),n.length===1&&t.length===1&&n[0].x===t[0].x&&n[0].y===t[0].y?n:n.concat(t)}var bn=Be,Cn=Ze,Tn=qe,Je=Ge;const En=bn,X=Cn,Q=Tn,B=i.forwardRef(({className:e,sideOffset:n=4,...t},o)=>u.jsx(Je,{ref:o,sideOffset:n,className:R("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));B.displayName=Je.displayName;function wn({departure:e,tableMode:n}){const t=n?e.delayInMinutes<=0?"text-black":e.delayInMinutes<=5?"text-yellow-500":"text-red-500":e.delayInMinutes<=0?"text-white":e.delayInMinutes<=5?"text-yellow-300":"text-red-300";return u.jsx(En,{delayDuration:100,children:u.jsxs("div",{className:R("flex","items-center",e.realtime?"":"opacity-70"),children:[u.jsx(ht,{label:e.label}),u.jsxs("div",{className:"flex w-full justify-between",children:[u.jsxs("span",{className:"mx-1 mr-12 flex",children:[e.destination,e.messages.length!==0&&u.jsx("span",{className:"ml-1",children:u.jsxs(X,{children:[u.jsx(Q,{children:u.jsx(Ut,{color:"orange",size:18})}),u.jsx(B,{className:"text-xs",children:e.messages.map((o,r)=>u.jsx("div",{children:o},r))})]})}),u.jsx("span",{className:"mx-1",children:!e.realtime&&u.jsxs(X,{children:[u.jsx(Q,{children:u.jsx(qt,{size:18,color:"#F05252"})}),u.jsx(B,{className:"text-xs",children:u.jsx(F,{children:"Misc.NoRealtimeData"})})]})})]}),u.jsxs(X,{children:[u.jsx(Q,{className:R("text-right","font-semibold",t),children:Xt(e.realtimeDepartureTime)}),u.jsxs(B,{className:"text-xs",children:[Qt(e.plannedDepartureTime),"+",u.jsx("span",{className:`font-semibold ${e.delayInMinutes>0?"text-red-500":"text-green-500"}`,children:e.delayInMinutes})]})]})]}),u.jsxs(X,{children:[u.jsx(Q,{children:u.jsx("div",{className:"relative -top-1 mx-2 min-w-5",children:u.jsx(tn,{occupancy:e.occupancy})})}),u.jsxs(B,{className:"text-xs",children:[u.jsx(F,{children:"Occupancy.Occupancy"}),": ",u.jsxs(F,{children:["Occupancy.",e.occupancy]})]})]})]})})}function _n({departures:e,tableMode:n}){return e.length===0?u.jsx("div",{className:"m-5 border p-4 text-center",children:"No departures available."}):u.jsx("div",{className:R("flex","flex-col","gap-1",n?"":"font-light"),children:e.map(t=>u.jsx(wn,{departure:t,tableMode:n},t.id))})}function jn({station:e}){return u.jsxs(Pe,{className:"w-auto bg-mvg text-white",onOpenAutoFocus:n=>{n.preventDefault()},children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("h2",{className:"mb-2 text-xl font-semibold",children:e.friendlyName}),u.jsx("div",{className:"mt-1",children:u.jsx(nn,{size:18,iconColor:"text-white",children:u.jsx(F,{children:"Misc.DeparturePopoverHelp"})})})]}),u.jsx(_n,{departures:e.departures,tableMode:!1}),u.jsxs("div",{className:"mt-4 flex justify-between text-xs",children:[u.jsxs("div",{children:["Ø ",Jt(e.avgDelay)," ",u.jsx(F,{children:"Misc.Delay"})]}),u.jsxs("div",{children:[u.jsx(F,{children:"Misc.LastRefresh"})," ",Me(e.lastUpdated,"HH:mm:ss")]})]})]})}const Mn="modulepreload",Sn=function(e){return"/"+e},ge={},Nn=function(n,t,o){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=Sn(l),l in ge)return;ge[l]=!0;const d=l.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Mn,d||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,h)=>{m.addEventListener("load",p),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return n().catch(s)})},Pn=i.createContext(null);function Ln(e,n){const t=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(n)?n[0]:n?n.x:0,s=Array.isArray(n)?n[1]:n?n.y:0;return t===r&&o===s}function P(e,n){if(e===n)return!0;if(!e||!n)return!1;if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(!P(e[t],n[t]))return!1;return!0}else if(Array.isArray(n))return!1;if(typeof e=="object"&&typeof n=="object"){const t=Object.keys(e),o=Object.keys(n);if(t.length!==o.length)return!1;for(const r of t)if(!n.hasOwnProperty(r)||!P(e[r],n[r]))return!1;return!0}return!1}function ye(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function ve(e,n){const t=n.viewState||n,o={};if("longitude"in t&&"latitude"in t&&(t.longitude!==e.center.lng||t.latitude!==e.center.lat)){const r=e.center.constructor;o.center=new r(t.longitude,t.latitude)}return"zoom"in t&&t.zoom!==e.zoom&&(o.zoom=t.zoom),"bearing"in t&&t.bearing!==e.bearing&&(o.bearing=t.bearing),"pitch"in t&&t.pitch!==e.pitch&&(o.pitch=t.pitch),t.padding&&e.padding&&!P(t.padding,e.padding)&&(o.padding=t.padding),o}const kn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xe(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const n={};for(const o of e.layers)n[o.id]=o;const t=e.layers.map(o=>{let r=null;"interactive"in o&&(r=Object.assign({},o),delete r.interactive);const s=n[o.ref];if(s){r=r||Object.assign({},o),delete r.ref;for(const a of kn)a in s&&(r[a]=s[a])}return r||o});return{...e,layers:t}}const be={version:8,sources:{},layers:[]},Ce={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Te={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Ee={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Rn=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],An=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class H{constructor(n,t,o){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=r=>{const s=this.props[Ee[r.type]];s?s(r):r.type==="error"&&console.error(r.error)},this._onCameraEvent=r=>{if(this._internalUpdate)return;r.viewState=this._propsedCameraUpdate||ye(this._map.transform);const s=this.props[Te[r.type]];s&&s(r)},this._onCameraUpdate=r=>this._internalUpdate?r:(this._propsedCameraUpdate=ye(r),ve(r,this.props)),this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const s=this.props[Ce[r.type]];s&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),s(r),delete r.features)},this._MapClass=n,this.props=t,this._initialize(o)}get map(){return this._map}setProps(n){const t=this.props;this.props=n;const o=this._updateSettings(n,t),r=this._updateSize(n),s=this._updateViewState(n);this._updateStyle(n,t),this._updateStyleComponents(n),this._updateHandlers(n,t),(o||r||s&&!this._map.isMoving())&&this.redraw()}static reuse(n,t){const o=H.savedMaps.pop();if(!o)return null;const r=o.map,s=r.getContainer();for(t.className=s.className;s.childNodes.length>0;)t.appendChild(s.childNodes[0]);r._container=t;const a=r._resizeObserver;a&&(a.disconnect(),a.observe(t)),o.setProps({...n,styleDiffing:!1}),r.resize();const{initialViewState:c}=n;return c&&(c.bounds?r.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):o._updateViewState(c)),r.isStyleLoaded()?r.fire("load"):r.once("style.load",()=>r.fire("load")),r._update(),o}_initialize(n){const{props:t}=this,{mapStyle:o=be}=t,r={...t,...t.initialViewState,container:n,style:xe(o)},s=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),t.gl){const c=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=c,t.gl)}const a=new this._MapClass(r);s.padding&&a.setPadding(s.padding),t.cursor&&(a.getCanvas().style.cursor=t.cursor),a.transformCameraUpdate=this._onCameraUpdate,a.on("style.load",()=>{var c;this._styleComponents={light:a.getLight(),sky:a.getSky(),projection:(c=a.getProjection)==null?void 0:c.call(a),terrain:a.getTerrain()},this._updateStyleComponents(this.props)}),a.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const c in Ce)a.on(c,this._onPointerEvent);for(const c in Te)a.on(c,this._onCameraEvent);for(const c in Ee)a.on(c,this._onEvent);this._map=a}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");t==null||t.remove(),H.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const n=this._map;n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}_updateSize(n){const{viewState:t}=n;if(t){const o=this._map;if(t.width!==o.transform.width||t.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(n){const t=this._map,o=t.transform;if(!t.isMoving()){const s=ve(o,n);if(Object.keys(s).length>0)return this._internalUpdate=!0,t.jumpTo(s),this._internalUpdate=!1,!0}return!1}_updateSettings(n,t){const o=this._map;let r=!1;for(const s of Rn)if(s in n&&!P(n[s],t[s])){r=!0;const a=o[`set${s[0].toUpperCase()}${s.slice(1)}`];a==null||a.call(o,n[s])}return r}_updateStyle(n,t){if(n.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=n.cursor||""),n.mapStyle!==t.mapStyle){const{mapStyle:o=be,styleDiffing:r=!0}=n,s={diff:r};"localIdeographFontFamily"in n&&(s.localIdeographFontFamily=n.localIdeographFontFamily),this._map.setStyle(xe(o),s)}}_updateStyleComponents({light:n,projection:t,sky:o,terrain:r}){var c,l;const s=this._map,a=this._styleComponents;s.style._loaded&&(n&&!P(n,a.light)&&(a.light=n,s.setLight(n)),t&&!P(t,a.projection)&&t!==((c=a.projection)==null?void 0:c.type)&&(a.projection=typeof t=="string"?{type:t}:t,(l=s.setProjection)==null||l.call(s,a.projection)),o&&!P(o,a.sky)&&(a.sky=o,s.setSky(o)),r!==void 0&&!P(r,a.terrain)&&(!r||s.getSource(r.source))&&(a.terrain=r,s.setTerrain(r)))}_updateHandlers(n,t){const o=this._map;for(const r of An){const s=n[r]??!0,a=t[r]??!0;P(s,a)||(s?o[r].enable(s):o[r].disable())}}_queryRenderedFeatures(n){const t=this._map,{interactiveLayerIds:o=[]}=this.props;try{return t.queryRenderedFeatures(n,{layers:o.filter(t.getLayer.bind(t))})}catch{return[]}}_updateHover(n){var r;const{props:t}=this;if(t.interactiveLayerIds&&(t.onMouseMove||t.onMouseEnter||t.onMouseLeave)){const s=n.type,a=((r=this._hoveredFeatures)==null?void 0:r.length)>0,c=this._queryRenderedFeatures(n.point),l=c.length>0;!l&&a&&(n.type="mouseleave",this._onPointerEvent(n)),this._hoveredFeatures=c,l&&!a&&(n.type="mouseenter",this._onPointerEvent(n)),n.type=s}else this._hoveredFeatures=null}}H.savedMaps=[];const Dn=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function In(e){if(!e)return null;const n=e.map,t={getMap:()=>n};for(const o of On(n))!(o in t)&&!Dn.includes(o)&&(t[o]=n[o].bind(n));return t}function On(e){const n=new Set;let t=e;for(;t;){for(const o of Object.getOwnPropertyNames(t))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&n.add(o);t=Object.getPrototypeOf(t)}return Array.from(n)}const $n=typeof document<"u"?i.useLayoutEffect:i.useEffect;function Fn(e,n){const{RTLTextPlugin:t,maxParallelImageRequests:o,workerCount:r,workerUrl:s}=n;if(t&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:a,lazy:c=!0}=typeof t=="string"?{pluginUrl:t}:t;e.setRTLTextPlugin(a,l=>{l&&console.error(l)},c)}o!==void 0&&e.setMaxParallelImageRequests(o),r!==void 0&&e.setWorkerCount(r),s!==void 0&&e.setWorkerUrl(s)}const oe=i.createContext(null);function zn(e,n){const t=i.useContext(Pn),[o,r]=i.useState(null),s=i.useRef(),{current:a}=i.useRef({mapLib:null,map:null});i.useEffect(()=>{const d=e.mapLib;let f=!0,m;return Promise.resolve(d||Nn(()=>import("./maplibre-gl-CLu3EmBG.js").then(p=>p.m),__vite__mapDeps([0,1]))).then(p=>{if(!f)return;if(!p)throw new Error("Invalid mapLib");const h="Map"in p?p:p.default;if(!h.Map)throw new Error("Invalid mapLib");Fn(h,e),e.reuseMaps&&(m=H.reuse(e,s.current)),m||(m=new H(h.Map,e,s.current)),a.map=In(m),a.mapLib=h,r(m),t==null||t.onMapMount(a.map,e.id)}).catch(p=>{const{onError:h}=e;h?h({type:"error",target:null,originalEvent:null,error:p}):console.error(p)}),()=>{f=!1,m&&(t==null||t.onMapUnmount(e.id),e.reuseMaps?m.recycle():m.destroy())}},[]),$n(()=>{o&&o.setProps(e)}),i.useImperativeHandle(n,()=>a.map,[o]);const c=i.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),l={height:"100%"};return i.createElement("div",{id:e.id,ref:s,style:c},o&&i.createElement(oe.Provider,{value:a},i.createElement("div",{"mapboxgl-children":"",style:l},e.children)))}const Hn=i.forwardRef(zn),Vn=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function k(e,n){if(!e||!n)return;const t=e.style;for(const o in n){const r=n[o];Number.isFinite(r)&&!Vn.test(o)?t[o]=`${r}px`:t[o]=r}}function Xe(e,n){if(e===n)return null;const t=we(e),o=we(n),r=[];for(const s of o)t.has(s)||r.push(s);for(const s of t)o.has(s)||r.push(s);return r.length===0?null:r}function we(e){return new Set(e?e.trim().split(/\s+/):[])}const Un=i.memo(i.forwardRef((e,n)=>{const{map:t,mapLib:o}=i.useContext(oe),r=i.useRef({props:e}),s=i.useMemo(()=>{let v=!1;i.Children.forEach(e.children,T=>{T&&(v=!0)});const E={...e,element:v?document.createElement("div"):void 0},x=new o.Marker(E);return x.setLngLat([e.longitude,e.latitude]),x.getElement().addEventListener("click",T=>{var _,b;(b=(_=r.current.props).onClick)==null||b.call(_,{type:"click",target:x,originalEvent:T})}),x.on("dragstart",T=>{var b,g;const _=T;_.lngLat=s.getLngLat(),(g=(b=r.current.props).onDragStart)==null||g.call(b,_)}),x.on("drag",T=>{var b,g;const _=T;_.lngLat=s.getLngLat(),(g=(b=r.current.props).onDrag)==null||g.call(b,_)}),x.on("dragend",T=>{var b,g;const _=T;_.lngLat=s.getLngLat(),(g=(b=r.current.props).onDragEnd)==null||g.call(b,_)}),x},[]);i.useEffect(()=>(s.addTo(t.getMap()),()=>{s.remove()}),[]);const{longitude:a,latitude:c,offset:l,style:d,draggable:f=!1,popup:m=null,rotation:p=0,rotationAlignment:h="auto",pitchAlignment:y="auto"}=e;i.useEffect(()=>{k(s.getElement(),d)},[d]),i.useImperativeHandle(n,()=>s,[]);const w=r.current.props;(s.getLngLat().lng!==a||s.getLngLat().lat!==c)&&s.setLngLat([a,c]),l&&!Ln(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==f&&s.setDraggable(f),s.getRotation()!==p&&s.setRotation(p),s.getRotationAlignment()!==h&&s.setRotationAlignment(h),s.getPitchAlignment()!==y&&s.setPitchAlignment(y),s.getPopup()!==m&&s.setPopup(m);const C=Xe(w.className,e.className);if(C)for(const v of C)s.toggleClassName(v);return r.current.props=e,je.createPortal(e.children,s.getElement())}));i.memo(i.forwardRef((e,n)=>{const{map:t,mapLib:o}=i.useContext(oe),r=i.useMemo(()=>document.createElement("div"),[]),s=i.useRef({props:e}),a=i.useMemo(()=>{const c={...e},l=new o.Popup(c);return l.setLngLat([e.longitude,e.latitude]),l.once("open",d=>{var f,m;(m=(f=s.current.props).onOpen)==null||m.call(f,d)}),l},[]);if(i.useEffect(()=>{const c=l=>{var d,f;(f=(d=s.current.props).onClose)==null||f.call(d,l)};return a.on("close",c),a.setDOMContent(r).addTo(t.getMap()),()=>{a.off("close",c),a.isOpen()&&a.remove()}},[]),i.useEffect(()=>{k(a.getElement(),e.style)},[e.style]),i.useImperativeHandle(n,()=>a,[]),a.isOpen()){const c=s.current.props;(a.getLngLat().lng!==e.longitude||a.getLngLat().lat!==e.latitude)&&a.setLngLat([e.longitude,e.latitude]),e.offset&&!P(c.offset,e.offset)&&a.setOffset(e.offset),(c.anchor!==e.anchor||c.maxWidth!==e.maxWidth)&&(a.options.anchor=e.anchor,a.setMaxWidth(e.maxWidth));const l=Xe(c.className,e.className);if(l)for(const d of l)a.toggleClassName(d);s.current.props=e}return je.createPortal(e.children,r)}));function I(e,n,t,o){const r=i.useContext(oe),s=i.useMemo(()=>e(r),[]);return i.useEffect(()=>{const a=n,c=null,l=typeof n=="function"?n:null,{map:d}=r;return d.hasControl(s)||(d.addControl(s,a==null?void 0:a.position),c&&c(r)),()=>{l&&l(r),d.hasControl(s)&&d.removeControl(s)}},[]),s}function Wn(e){const n=I(({mapLib:t})=>new t.AttributionControl(e),{position:e.position});return i.useEffect(()=>{k(n._container,e.style)},[e.style]),null}i.memo(Wn);function Bn(e){const n=I(({mapLib:t})=>new t.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return i.useEffect(()=>{k(n._controlContainer,e.style)},[e.style]),null}i.memo(Bn);function Zn(e,n){const t=i.useRef({props:e}),o=I(({mapLib:r})=>{const s=new r.GeolocateControl(e),a=s._setupUI;return s._setupUI=()=>{s._container.hasChildNodes()||a()},s.on("geolocate",c=>{var l,d;(d=(l=t.current.props).onGeolocate)==null||d.call(l,c)}),s.on("error",c=>{var l,d;(d=(l=t.current.props).onError)==null||d.call(l,c)}),s.on("outofmaxbounds",c=>{var l,d;(d=(l=t.current.props).onOutOfMaxBounds)==null||d.call(l,c)}),s.on("trackuserlocationstart",c=>{var l,d;(d=(l=t.current.props).onTrackUserLocationStart)==null||d.call(l,c)}),s.on("trackuserlocationend",c=>{var l,d;(d=(l=t.current.props).onTrackUserLocationEnd)==null||d.call(l,c)}),s},{position:e.position});return t.current.props=e,i.useImperativeHandle(n,()=>o,[]),i.useEffect(()=>{k(o._container,e.style)},[e.style]),null}i.memo(i.forwardRef(Zn));function qn(e){const n=I(({mapLib:t})=>new t.NavigationControl(e),{position:e.position});return i.useEffect(()=>{k(n._container,e.style)},[e.style]),null}i.memo(qn);function Gn(e){const n=I(({mapLib:s})=>new s.ScaleControl(e),{position:e.position}),t=i.useRef(e),o=t.current;t.current=e;const{style:r}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(n.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&n.setUnit(e.unit),i.useEffect(()=>{k(n._container,r)},[r]),null}i.memo(Gn);function Kn(e){const n=I(({mapLib:t})=>new t.TerrainControl(e),{position:e.position});return i.useEffect(()=>{k(n._container,e.style)},[e.style]),null}i.memo(Kn);function Yn(e){const n=I(({mapLib:t})=>new t.LogoControl(e),{position:e.position});return i.useEffect(()=>{k(n._container,e.style)},[e.style]),null}i.memo(Yn);function _e(){if(typeof window>"u")return{width:0,height:0};const{innerWidth:e,innerHeight:n}=window;return{width:e,height:n}}function Jn(){const[e,n]=i.useState(_e());return i.useEffect(()=>{function t(){n(_e())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e}const Xn=`M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3
  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9
  C20.1,15.8,20.2,15.8,20.2,15.7z`;function Qn({size:e=12,color:n="#fff"}){const t={cursor:"pointer",fill:n,stroke:"none"};return u.jsx("svg",{height:e,viewBox:"0 0 24 24",style:t,children:u.jsx("path",{d:Xn})})}function eo(e,n){let t;if(n)t=e.avgDelay;else{const r=en(e);t=r==null?void 0:r.delayInMinutes}return t===void 0?"#ffffff":t<=0?"#31C48D":t<=5?"#FACA15":"#F05252"}function to({station:e,historyMode:n}){const[t,o]=i.useState(!1),r=e.departures[0];return i.useEffect(()=>{if(r&&Date.now()>r.realtimeDepartureTime){o(!0);const s=setTimeout(()=>o(!1),1e3);return()=>clearTimeout(s)}},[r]),u.jsxs(Se,{children:[u.jsx(Ne,{children:u.jsx("span",{className:R("h-10 transform transition-all",t&&"animate-flash-grow"),children:u.jsx(Qn,{color:eo(e,n)})})}),u.jsx(jn,{station:e})]})}function yo({stations:e,historyMode:n=!1}){const t={scrollZoom:!1,boxZoom:!1,dragRotate:!1,dragPan:!1,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!1,touchPitch:!1,cursor:"auto"},o=Object.entries(e).map(([,a],c)=>u.jsx(Un,{longitude:parseFloat(a.coordinates.longitude),latitude:parseFloat(a.coordinates.latitude),anchor:"bottom",children:u.jsx(to,{station:a,historyMode:n})},`marker-${c}`)),{width:r}=Jn(),s=r>=1024?11.35:10;return u.jsx("div",{className:"mx-5 h-[500px] md:h-[1100px]",children:u.jsx(Hn,{initialViewState:{latitude:48.18,longitude:11.579,zoom:s},mapStyle:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",attributionControl:!1,...t,children:o})})}var re="Tabs",[no,vo]=Re(re,[Fe]),Qe=Fe(),[oo,fe]=no(re),et=i.forwardRef((e,n)=>{const{__scopeTabs:t,value:o,onValueChange:r,defaultValue:s,orientation:a="horizontal",dir:c,activationMode:l="automatic",...d}=e,f=wt(c),[m,p]=Ie({prop:o,onChange:r,defaultProp:s??"",caller:re});return u.jsx(oo,{scope:t,baseId:De(),value:m,onValueChange:p,orientation:a,dir:f,activationMode:l,children:u.jsx(G.div,{dir:f,"data-orientation":a,...d,ref:n})})});et.displayName=re;var tt="TabsList",nt=i.forwardRef((e,n)=>{const{__scopeTabs:t,loop:o=!0,...r}=e,s=fe(tt,t),a=Qe(t);return u.jsx(_t,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:o,children:u.jsx(G.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:n})})});nt.displayName=tt;var ot="TabsTrigger",rt=i.forwardRef((e,n)=>{const{__scopeTabs:t,value:o,disabled:r=!1,...s}=e,a=fe(ot,t),c=Qe(t),l=it(a.baseId,o),d=ct(a.baseId,o),f=o===a.value;return u.jsx(jt,{asChild:!0,...c,focusable:!r,active:f,children:u.jsx(G.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:n,onMouseDown:L(e.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?a.onValueChange(o):m.preventDefault()}),onKeyDown:L(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(o)}),onFocus:L(e.onFocus,()=>{const m=a.activationMode!=="manual";!f&&!r&&m&&a.onValueChange(o)})})})});rt.displayName=ot;var st="TabsContent",at=i.forwardRef((e,n)=>{const{__scopeTabs:t,value:o,forceMount:r,children:s,...a}=e,c=fe(st,t),l=it(c.baseId,o),d=ct(c.baseId,o),f=o===c.value,m=i.useRef(f);return i.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),u.jsx($e,{present:r||f,children:({present:p})=>u.jsx(G.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:d,tabIndex:0,...a,ref:n,style:{...e.style,animationDuration:m.current?"0s":void 0},children:p&&s})})});at.displayName=st;function it(e,n){return`${e}-trigger-${n}`}function ct(e,n){return`${e}-content-${n}`}var ro=et,lt=nt,ut=rt,dt=at;const xo=ro,so=i.forwardRef(({className:e,...n},t)=>u.jsx(lt,{ref:t,className:R("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...n}));so.displayName=lt.displayName;const ao=i.forwardRef(({className:e,...n},t)=>u.jsx(ut,{ref:t,className:R("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...n}));ao.displayName=ut.displayName;const io=i.forwardRef(({className:e,...n},t)=>u.jsx(dt,{ref:t,className:R("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n}));io.displayName=dt.displayName;export{jn as D,nn as H,yo as S,F as T,_n as a,xo as b,so as c,en as d,ao as e,Jt as f,io as g,po as s};
